### 代理模式

#### 代理模式

##### 核心作用

- 通过代理控制对象的访问

可以详细控制访问某个（某类）对象的方法，在调用这个方法前做前置处理，调用这个方法后做后置处理（AOP）


##### AOP 的核心实现机制


#### 代理模式

- 抽象角色：
	- 定义代理角色和真实角色的公共对外方法
- 真实角色：
	- 实现抽象角色，定义真实角色索要实现的业务逻辑，供代理角色使用；
	- 关注真正的业务逻辑
- 代理角色
	- 实现抽象角色，是真实角色的代理，通过真实角色的业务逻辑方法来实现抽象方法，并附加自己的操作
	- 将统一的流程控制放到代理类中
	
	
#### 应用场景

- 安全代理：屏蔽对真实角色的直接访问
- 远程代理：通过代理类处理远程方法调用(RMI)
- 延迟加载：先加载轻量级的代理对象，真正需要再加载真实对象

#### 分类

- 静态代理（静态定义代理类）
- 动态代理（动态生成代理类）
	- jdk 自带的动态代理
	- javaassist字节码操作库实现
	- cglib
	- asm（底层使用指令，可维护性较差）
	
#### JDK 自带的动态代理

- java.lang.reflect.Proxy
	动态生成代理类和对象
- java.lang.reflect.InvocationHandler(处理器接口)
	- 通过 invoke() 方法实现对真实角色的代理访问
	- 每次通过 Proxy 生成代理类对象对象时，都要指定对应的处理器对象
